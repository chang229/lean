<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>观察者模式</title>
</head>
<body>
    <div id="app"></div>
</body>
<script>
    class Dep{
        constructor(){
            this.subs = [];
        }
        addSubs(subs){
            // subs有update方法才是观察者
            if(subs && subs.update){
                this.subs.push(subs)
            }
        }
        notify(){
            this.subs.forEach((v) => v.update())
        }
    }

    class Watch{
        update(){
            console.log('update')
        }
    }

    let dep = new Dep();
    let watcher = new Watch();

    dep.addSubs(watcher);

    dep.notify();
</script>
</html>